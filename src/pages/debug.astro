---
import { supabase } from '../lib/supabase';

// Intentamos traer los productos
const { data: productos, error } = await supabase
  .from('productos')
  .select('*');

// Verificación de conexión
const conexionExitosa = !error;
---

<html>
  <head><title>Debug Conexión Amasar</title></head>
  <body style="font-family: sans-serif; padding: 40px; background: #f0f0f0;">
    <h1>Estado de la Conexión a Supabase</h1>

    {conexionExitosa ? (
      <div style="background: #d4edda; color: #155724; padding: 20px; border-radius: 8px;">
        <h2>✅ ¡Conexión Exitosa!</h2>
        <p>Se encontraron {productos?.length} productos en la base de datos.</p>
        <pre>{JSON.stringify(productos, null, 2)}</pre>
      </div>
    ) : (
      <div style="background: #f8d7da; color: #721c24; padding: 20px; border-radius: 8px;">
        <h2>❌ Error de Conexión</h2>
        <p>Mensaje: {error.message}</p>
        <p>Tip: Revisa que tus llaves en el archivo .env sean exactas.</p>
      </div>
    )}
    
    <a href="/" style="display: inline-block; mt: 20px;">Volver al inicio</a>
  </body>
</html>