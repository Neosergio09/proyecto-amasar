---
import MainLayout from '../layouts/MainLayout.astro';
import { supabase } from '../lib/supabase';
// 1. Importamos el componente de optimizaci√≥n y tu imagen local
import { Image } from 'astro:assets';
import heroImage from '../assets/unnamed.jpg';

// SEO y Copywriting Estrat√©gico
const title = "Proveedor Mayorista de Panader√≠a y Caf√©";
const description = "Amasar es el aliado estrat√©gico para panader√≠as en Bogot√°. Galletas artesanales, caf√© premium y trazabilidad total en cada pedido.";

// Obtenemos una muestra de productos para el cat√°logo r√°pido
const { data: destacados } = await supabase
  .from('productos')
  .select('*')
  .limit(3);
---

<MainLayout title={title} description={description}>
  <section class="relative min-h-[90vh] flex items-center pt-20 overflow-hidden">
    <div class="max-w-7xl mx-auto px-6 grid md:grid-cols-2 gap-16 items-center">
      <div class="z-10">
        <span class="inline-block py-1 px-4 rounded-full bg-primary/10 text-primary font-bold text-xs uppercase tracking-widest mb-6">
          Hecho a mano en Bogot√°
        </span>
        <h1 class="text-6xl md:text-8xl font-serif leading-[1.1] mb-8 text-secondary">
          Calidad <span class="italic text-primary">artesanal</span> para tu vitrina.
        </h1>
        <p class="text-xl text-slate-600 mb-10 max-w-lg leading-relaxed">
          Suministramos galletas decoradas, caf√© de origen y jugos naturales con tecnolog√≠a de rastreo en tiempo real para tu tranquilidad.
        </p>
        <div class="flex flex-wrap gap-4">
          <a href="/productos" class="bg-secondary text-white px-10 py-5 rounded-2xl font-bold text-lg hover:bg-black transition-all shadow-2xl">
            Ver Cat√°logo
          </a>
          <a href="/rastreo" class="bg-white border-2 border-slate-200 text-secondary px-10 py-5 rounded-2xl font-bold text-lg hover:border-primary transition-all">
            Rastrear Pedido
          </a>
        </div>
      </div>

      <div class="relative">
        <div class="aspect-[4/5] rounded-[3rem] overflow-hidden shadow-2xl rotate-2 hover:rotate-0 transition-transform duration-700">
          <Image 
            src={heroImage} 
            alt="Variedad de galletas artesanales de Amasar horneadas en Bogot√°" 
            class="w-full h-full object-contain scale-110 hover:scale-100 transition-transform duration-1000"
            loading="eager"
            format="webp"
          />
        </div>
        <div class="absolute -bottom-10 -right-10 bg-primary p-10 rounded-full text-white shadow-2xl border-8 border-background animate-bounce-slow">
            <p class="text-center font-bold">
                <span class="block text-4xl">100%</span>
                <span class="text-[10px] uppercase tracking-tighter">Calidad Local</span>
            </p>
        </div>
      </div>
    </div>
  </section>

  <section class="py-32 bg-white">
    <div class="max-w-7xl mx-auto px-6">
      <div class="text-center mb-20">
        <h2 class="text-4xl font-serif text-secondary mb-4">Nuestras L√≠neas de Producto</h2>
        <div class="h-1 w-20 bg-primary mx-auto"></div>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
        {[
          { name: 'Galletas', desc: 'Artesanales e Impresas', icon: 'üç™' },
          { name: 'Chocolater√≠a', desc: 'Bombones y Macarrones', icon: 'üç´' },
          { name: 'Caf√©', desc: 'Tostado y Molido', icon: '‚òï' },
          { name: 'Jugos', desc: 'Concentrados por Litro', icon: 'ü•§' }
        ].map((cat) => (
          <div class="group p-10 rounded-[2.5rem] bg-background border border-slate-100 hover:border-primary transition-all hover:shadow-2xl cursor-pointer">
            <span class="text-5xl mb-6 block">{cat.icon}</span>
            <h3 class="text-2xl font-serif mb-2 group-hover:text-primary transition-colors">{cat.name}</h3>
            <p class="text-slate-500 text-sm italic">{cat.desc}</p>
          </div>
        ))}
      </div>
    </div>
  </section>

  {destacados && destacados.length > 0 && (
    <section class="py-20 bg-background">
      <div class="max-w-7xl mx-auto px-6 text-center">
        <h2 class="text-3xl font-serif mb-12">Reci√©n horneados</h2>
        <div class="grid md:grid-cols-3 gap-10">
          {destacados.map((prod) => (
            <div class="bg-white p-4 rounded-3xl shadow-sm hover:shadow-md transition-shadow">
              <div class="aspect-square bg-slate-100 rounded-2xl mb-4 overflow-hidden">
                <img src={prod.imagen_url || '/placeholder.jpg'} alt={prod.nombre} class="w-full h-full object-cover" />
              </div>
              <h4 class="font-bold text-lg">{prod.nombre}</h4>
              <p class="text-primary font-bold">${prod.precio}</p>
            </div>
          ))}
        </div>
      </div>
    </section>
  )}
</Layout>

<style>
  @keyframes bounce-slow {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-20px); }
  }
  .animate-bounce-slow {
    animation: bounce-slow 5s infinite ease-in-out;
  }
</style>